# Общее положение


### Статусы

**Какая то хуйне со статусами. Не актуально**

Если внутри какой-либо функции что-то может пойти "не так" то функция должна об этом однозначно сообщить.

Существует общий для всех тип `lxb_status_t` (`int`) определенный в `lexbor/base.h`.
Каждый модуль проекта lexbor определяет свой диапазон статусов. Для примера,

```C
/*
...
lexbor 000000..008fff; LXB_STATUS_OK      == 0x000000
html   009000..0093ff; LXB_HTML_STATUS_OK == 0x000000
...
*/
```
С полным списком можно ознакомится в файле `lexbor/base.h`.

Любая функция любого модуля может возвращать любой статус. К примеру, функции из модуля `html` могут возвращать статус `LXB_STATUS_ERROR_MEMORY_ALLOCATION`.

Два главных правила при работе со статусами:

1. Если статус равен нолю (0) то значит всё хорошо, иначе что-то пошло не так.
2. Необходимо возвращать реальные статусы. То есть, если память не выделена то вернуть `LXB_STATUS_ERROR_MEMORY_ALLOCATION`, а не какой-нибудь фейковый 0x100.

Перечисления (enum) статусов для конкретного модуля лучше всего держать в файле `base.h` в корне модуля. Для примера, `/source/html/base.h`.


### Версии

Каждый модуль должен содержать информацию о своей версии в заголовочном файле `base.h` в корне модуля. Для примера, `/source/lexbor/html/base.h`.

Шаблон:

```C
#define <ИМЯ-МОДУЛЯ>_VERSION_MAJOR 1
#define <ИМЯ-МОДУЛЯ>_VERSION_MINOR 0
#define <ИМЯ-МОДУЛЯ>_VERSION_PATCH 3

#define <ИМЯ-МОДУЛЯ>_VERSION_STRING LXB_STR(<ИМЯ-МОДУЛЯ>_VERSION_MAJOR) LXB_STR(.) \
                                    LXB_STR(<ИМЯ-МОДУЛЯ>_VERSION_MINOR) LXB_STR(.) \
                                    LXB_STR(<ИМЯ-МОДУЛЯ>_VERSION_PATCH)
```
